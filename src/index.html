<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hospital</title>
        <link rel="stylesheet" href="frontpage.css">
    </head>
<body>
    <div class="container">
    <img src="images/hospital.png" width="40%">
    <h1>dApp de Armazenamento de Exames de Sangue</h1>
    <h3 id="address">Endereço: </h3>
    <div class="options">
        <a href="StoreExam.html" class="option">Armazenar Exame</a>
        <a href="SeeExam.html" class="option">Visualizar meus Exames</a>
        <a href="SeeSharedExams.html" class="option">Visualizar Exames Compartilhados</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.3.1/web3.min.js"></script>
    <script>
        let web3;

        async function init() {
            if (window.ethereum) {
                try {
                    web3 = new Web3(window.ethereum);
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    contract = new web3.eth.Contract(contractAbi, contractAddress);
                } catch (error) {
                    console.error("Usuário recusou o acesso à Ethereum wallet");
                }
            } else {
                alert('Instale MetaMask!');
            }
            ShowAddress();
        }
        
        async function ShowAddress() {
            const addressText = document.getElementById('address');
            const accounts = await web3.eth.getAccounts();
            addressText.innerText = 'Endereço: ' + accounts[0];
        }
        window.onload = init;
    </script>
    </div>
</body>
</html>
